<h1>Changelog</h1>
<p>All notable changes to this project will be documented in this file.</p>
<p>The format is based on: 
<a href="http://keepachangelog.com/en/1.0.0/">Keep a Changelog</a>
and this project adheres to: 
<a href="http://semver.org/spec/v2.0.0.html">Semantic Versioning</a>.</p>
<hr />
<h2>[1.4.0] - 2018-07-20 - RIHY</h2>
<h3>Changed</h3>
<h3>Added</h3>
<ul>
<li>
<p>Check added as to Scipy version when importing <code>tstep.py</code> module; v1.0 or 
  greater required (an exception will be raised otherwise, as <code>solve_ivp()</code> 
  method unavaliable in earlier versions.</p>
</li>
<li>
<p><code>scipy.linalg.null_space()</code> method now used when possible (i.e. when Scipy 
  v1.1 or greater is used), to save duplication of code in <code>null_space()</code> 
  method with <code>dynsys.py</code> module. In the future the plan will be to use the 
  Scipy method alone, to allow reduction in code.</p>
</li>
<li>
<p><code>LatSync_McRobie()</code> class defined within <code>ped_dyn.py</code> module. Implements 
  lateral synchorous vibration calculations per McRobie's Stockton on Tees 
  footbridge paper (refer <code>/references</code>). See also validation script, which 
  obtains excellent agreement with figures presented in McRobie's paper.</p>
</li>
</ul>
<h3>Fixed</h3>
<h3>Removed</h3>
<h2>[1.3.0] - 2018-07-20 - RIHY</h2>
<h3>Changed</h3>
<h3>Added</h3>
<ul>
<li>
<p>New method <code>transform_to_unconstrained()</code> defined in <code>dynsys.py</code> module, to 
  implement method for transforming a constrained system (i.e. a system with 
  constraint equations) into an equivilent unconstrained one. [This is a key 
  step in calculations such as complex eigensolution and evaluation of 
  frequency transfer matrix.]. This method can be generally used - but the 
  main motivation behind its implementation is to allow code reuse in multiple 
  methods of the core <code>DynSys</code> class, e.g. <code>DynSys.CalcEigenproperties()</code>.</p>
</li>
<li>
<p><code>DynSys.CalcEigenproperties()</code> method will now work for systems with 
  constraints. Accuracy of the implementation has been validated by extension 
  of Warburton TMD validation script.</p>
</li>
</ul>
<h3>Fixed</h3>
<h3>Removed</h3>
<h2>[1.2.2] - 2018-07-19 - RIHY</h2>
<h3>Changed</h3>
<h3>Added</h3>
<h3>Fixed</h3>
<ul>
<li>
<p>Further fix associated with lambda fix at v1.2.1: when multiple modes 
  included array of maximum modeshape ordinate now calculated and appropriate 
  value used in calculations targeting specific mode. Previous behaviour was to 
  obtain maximum ordinate across all modes, which is inaccurate when mode being 
  considered does not have this ordinate.</p>
</li>
<li>
<p>Minor fixes to iron-out runtime bugs in routines associated with steady-state 
  crowd loading analysis. Bugs relates to plotting and results reporting, i.e. 
  no impact on the accuracy of calculations made using previous versions.</p>
</li>
</ul>
<h3>Removed</h3>
<h2>[1.2.1] - 2018-07-17 - RIHY</h2>
<h3>Changed</h3>
<h3>Added</h3>
<ul>
<li><code>damper.py</code> module added; <code>TMD()</code> class defined within this module, to allow 
  tuned mass damper systems to be conveniently defined</li>
</ul>
<h3>Fixed</h3>
<ul>
<li>Bug associated with calculation of lambda factor for UK NA steady-state crowd 
  loading analysis fixed.</li>
</ul>
<h3>Removed</h3>
<h2>[1.2.0] - 2018-06-12 - RIHY</h2>
<h3>Changed</h3>
<ul>
<li>
<p>Pedestrian dynamics classes and functions moved to new module <code>ped_dyn.py</code>
  (previously these were within the <code>dyn_analysis.py</code> module)</p>
</li>
<li>
<p>Many method previously implemented as class methods of <code>DynSys</code> class now 
  re-implemented as functions within the <code>dynsys.py</code> module. Class methods 
  still exist as per previous versions, but these use the public functions to 
  do the work</p>
</li>
<li>
<p>Various misc updates to plotting methods within <code>tstep_results.py</code> module</p>
</li>
<li>
<p>The majority of docstrings have been reviewed/improved, to ensure they 
  reflect the source code and provide more references to theory, codes etc.</p>
</li>
</ul>
<h3>Added</h3>
<ul>
<li>
<p><code>tutorial.ipynb</code>, a IPython (Jupyter) notebook which provides an introduction 
  on how to go about using the classes/functions within the package</p>
</li>
<li>
<p>Crowd loading to UK NA to BS EN 1991-2 now implemented</p>
</li>
<li>
<p><code>CalcEigenproperties()</code> method of <code>DynSys</code> class reimplemented to handle 
  systems with constraints. Approach for unconstrained systems similar to 
  previous versions except <code>scipy.linalg.eig()</code> method now used.</p>
</li>
<li>
<p><code>/tests</code> updated: new test of <code>CalcEigenvalues()</code> method devised</p>
</li>
</ul>
<h3>Fixed</h3>
<ul>
<li>
<p>Bug as noted by BNCY in <code>dyn_analysis.py</code> now fixed. A check of the class 
  name of <code>loadtrain_obj</code> was being made, but as a result of recent changes 
  this was checking the derived class name.</p>
</li>
<li>
<p><code>trainAnalysis.py</code> updated with minor change to reflect new <code>stats_dict</code> 
  nested dict structure</p>
</li>
<li>
<p>Bug associated with output matrices fixed; was only an issue when re-defining 
  systems</p>
</li>
</ul>
<h3>Removed</h3>
<h2>[1.1.1] - 2018-05-22 - RIHY</h2>
<p><em>Hotfix responding to BNCY's 21/05/2018 email</em></p>
<h3>Fixed</h3>
<ul>
<li>Tempororary fix implemented to address bug, by commenting-out rows.
  To be addressed properly in future releases.</li>
</ul>
<h2>[1.1.0] - 2018-04-23 - RIHY</h2>
<h3>Changed</h3>
<ul>
<li>Version number now included in html docs</li>
</ul>
<h3>Added</h3>
<ul>
<li>New functionality to implement UK NA to BS EN 1992-1 footbridge dynamics:<ul>
<li>New class in <code>loading.py</code>, <code>UKNA_BSEN1991_2_walkers_joggers_loading</code>.
  Defines moving load group for walkers/joggers. Inherits most of the 
  functionality from existing <code>LoadTrain</code> class.</li>
<li>Figure functions, to return parameters given by code figures:<ul>
<li><code>UKNA_BSEN1991_2_Figure_NA_8</code> in <code>loading.py</code></li>
<li><code>UKNA_BSEN1991_2_Figure_NA_9</code> in <code>dyn_analysis.py</code></li>
</ul>
</li>
<li>New class in <code>dyn_analysis.py</code>, <code>UKNA_BSEN1991_2_walkers_joggers</code> (this 
  inherits functionality from existing <code>MovingLoadAnalysis</code> class)</li>
<li>New class in <code>dyn_analysis.py</code>, <code>PedestrianDynamics_transientAnalyses</code>.
  Inherits functionality from existing <code>Multiple</code> class. This can be used 
  to carry out all the necessary walking/jogging analyses for all modes.</li>
<li>Example added to <code>examples\Pedestrian dynamics\UK NA walkers joggers</code> to 
  test and illustrate the use of these number classes and functions   </li>
</ul>
</li>
</ul>
<h3>Fixed</h3>
<h3>Removed</h3>
<h2>[1.0.0] - 2018-04-17 - RIHY</h2>
<h3>Changed</h3>
<ul>
<li><code>warburton_TMD.py</code> validation script moved to subfolder. In future all validation
  scripts should be kept in subfolders to avoid confusion / cross-over of inputs</li>
<li>System matrices (e.g. M_mtrx, K_mtrx etc) now intended to be held as private 
  attributes; renames _M_mtrx, _C_mtrx to denote this change in intent. 
  <code>GetSystemMatrices()</code> member function of <code>DynSys</code> class re-instated (this 
  was previously marked as deprecated) and overhauled to act as the primary 
  get() function for obtaining system matrices</li>
<li>Significant non backwards-compatible overhaul of how constraints are defined 
  and handled internally within the <code>DynSys</code> class. Constraint matrices are 
  now held within a dict and kept local to each dynamic system. This allows for 
  straightforward addition/removal of constraints and improves modularity. </li>
<li>Improved functionality for systems with sub-systems appended using 
  <code>AppendSystem()</code> method</li>
<li>Plotting methods and response / response stats calculation methods revised to 
  be more structured and cater for systems with multiple subsystems</li>
<li><code>Graphviz</code> package used to produce call graphs for train analysis example script.
  This type of testing was found to be very assistive in diagnosing slow steps in 
  the analysis and allowed overall runtime to be dramatically improved. Tests like 
  this should be carried out periodically in the future. Dedicted subfolder made in 
  /tests folder for this purpose.</li>
</ul>
<h3>Added</h3>
<ul>
<li>Validation example added to verify accuracy or revised ResponseSpectrum()
  function. Example computes response spectra for the classic El-Centro (1940)
  earthquake and makes comparison against published plots. Excellent agreement 
  found!</li>
<li>New method <code>PrintResponseStats()</code> added to <code>tstep_results</code> class, to allow 
  response statistics to be printed to text window in a nice manner</li>
</ul>
<h3>Fixed</h3>
<ul>
<li>Bug fix for ResponseSpectrum() function in <code>dyn_analysis</code>. 
  Equation of motion corrected to be -M.a (minus sign previously omitted)
  Acceleration spectrum now based on <em>absolute</em> acceleration, as is conventional
  (previous versions omitted to add the input ground motion to the SDOF responses 
  calculated)</li>
</ul>
<h3>Removed</h3>
<ul>
<li>GetRealWorldDOFs() method removed from DynSys class (this had been marked as 
  deprecated since v0.1.0)</li>
</ul>
<h2>[0.5.1] - 2018-03-19 - RIHY</h2>
<h3>Changed</h3>
<ul>
<li><code>docs</code> remade (forgot to do this before releasing v0.5.0)</li>
</ul>
<h2>[0.5.0] - 2018-03-19 - RIHY</h2>
<h3>Added</h3>
<ul>
<li><code>ResponseSpectrum</code> function added to <code>dyn_analysis</code> module, to allow 
  calculation of SDOF response spectrum (per seismic analysis) based on ground 
  motion acceleration time series</li>
</ul>
<h3>Fixed</h3>
<ul>
<li>Bugs in plotting routines within <code>tstep_results</code> arising from change to 
  response results internal storage structure</li>
<li>Miscellaneous fixes associated with <code>None</code> optional arguments</li>
</ul>
<h3>Changed</h3>
<ul>
<li>Statistics calculated using <code>CalcResponseStats()</code> within <code>tstep_results</code> 
  module are now returned as a dict, rather than list of dicts</li>
</ul>
<h3>Removed</h3>
<h2>[0.4.0] - 2018-03-19 - RIHY</h2>
<h3>Added</h3>
<ul>
<li><code>tstep_results.WriteResults2File()</code> method allows time-series results to 
  be written to file. Linking to this function made in <code>tstep</code> and 
  <code>dyn_analysis</code> class methods. Files exported have QA-relevant headers (date, 
  version etc)</li>
<li><code>dyn_analysis.Dyn_Analysis</code>and <code>dyn_analysis.Multiple</code> objects can now be 
  saved and loaded using <code>dill</code> module (similar to <code>pickle</code>). 
  This allows objects (incl results) to be stored as binary files and 
  reloaded later. This is very useful when carrying out lots of analyses, as 
  it allows all data to be saved and reloaded later e.g. for further 
  manuipluation</li>
<li>Optional argument <code>fLimit</code> added to <code>modalsys.ModalSys()</code>, to allow maximum 
  modal natural frequency to be specified. Modes with fn &gt; fLimit will not be 
  included in analysis (a warning message is printed to show this)</li>
<li><code>DynSys.PlotResponsePSD()</code> added to implement plotting of PSDs of response 
  time series</li>
<li>Git version control used now</li>
</ul>
<h3>Fixed</h3>
<ul>
<li>Code hide x_axis within <code>tstep_results.PlotResponseResults()</code> function 
  removed as obsolete: subplots now use <code>sharex=True</code></li>
</ul>
<h3>Changed</h3>
<h3>Removed</h3>
<hr />
<h2>[0.3.0] - 2018-03-16 - RIHY</h2>
<h3>Added</h3>
<ul>
<li>In <code>DynSys.__init__()</code> option added to represent system matrices as sparse 
  matrices (which they usually are), using <code>scipy.sparse.csc_matrix</code> format. 
  Code updates implemented in all modules to handle sparse matrices. However 
  current dense methods are used by default as this is regarded as a work in 
  progress</li>
<li>New module <code>tstep_analysis</code> added. This modules contains classes to implement 
  certain forms of time-history analysis</li>
<li><code>setup.py</code> created, per PyPi guidance</li>
<li>Within <code>dynsys</code> and derived classes, output matrix and corresponding names no 
  longer stored as a list of matrices / list of names, as this was proving 
  unnecessarily confusing! Corrections made in all modules (I think...)</li>
</ul>
<h3>Fixed</h3>
<ul>
<li>When <code>modalsys.AppendTMDs</code> is used, this has the effect of increasing the 
  nDOF of system. Need therefore to adjust structure of <code>output_mtrx</code>. This is 
  now done</li>
</ul>
<h3>Changed</h3>
<ul>
<li>If <code>J_mtrx=None</code> is passed into DynSys() <strong>init</strong> function then <code>J_mtrx</code> is 
  now initialised as an array of shape [0,nDOF]</li>
<li>Significant overhaul of <code>tstep</code> and <code>tstep_results</code></li>
<li>Package version now in <code>__init__.py</code> as single point of reference</li>
<li>Treatment of response / output matrices in <code>tstep_results</code>, <code>tstep</code> and 
  <code>dynsys</code> harmonised</li>
<li>Miscellaneous improvements / options added to results plotting routines</li>
</ul>
<h3>Removed</h3>
<hr />
<h2>[0.2.0] - 2018-03-02 - RIHY</h2>
<h3>Added</h3>
<ul>
<li><code>/tests/tests_basic.py</code>, to contain test functions</li>
<li><code>/tests/test_docs.py</code>, to auto-generate documentation concerning tests</li>
<li>SDOF properties conversion functions added to <code>dynsys</code> for common use in 
  other modules</li>
<li><code>tstep</code> added to package, to provide time-stepping analysis functionality. 
  This was previously a seperate package, but given inter-dependecies it makes 
  more sense for this to be part of <code>dynsys</code></li>
</ul>
<h3>Changed</h3>
<ul>
<li>Package folder structure extended:<ul>
<li><code>validation</code> subfolder created, to contain scripts which are more 
involved than simple <code>unittest</code> routines and serve to validate the library 
by comparing results obtained using <code>dynsys</code> routines against published 
results given in classical dynamics literature</li>
<li><code>docs</code>, <code>img</code>, <code>ref</code> subfolders created in <code>tests</code></li>
</ul>
</li>
</ul>
<hr />
<h2>[0.1.0] - 2018-02-28 - RIHY</h2>
<h3>Added</h3>
<ul>
<li><code>CHANGELOG.md</code> (this file) created for the first time</li>
<li><code>README.md</code> created for the first time</li>
</ul>
<h3>Changed</h3>
<ul>
<li>
<p>Package folder structure changed:</p>
<ul>
<li>
<p>All modules in <code>dynsys</code>: <code>import</code> statements revised accordingly</p>
</li>
<li>
<p>Documentation in <code>doc</code>: this is generated by running <code>make_docs.py</code></p>
</li>
<li>
<p>Tests to be in <code>tests</code>: this folder is for formal <code>unittest</code> routines</p>
</li>
<li>
<p>Examples are in <code>examples</code>: these are not formal tests, but are examples 
  of the functionality offered by this package</p>
</li>
<li>
<p>References (e.g. PDFs of published papers, derivations) should be stored 
  in the <code>references</code> folder. These should be linked to via docstrings.</p>
</li>
</ul>
</li>
</ul>